<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Verificación de credencial — Empresa</title>
  <meta name="description" content="Página de verificación de credencial para personal autorizado en campo." />
  <style>
    :root{
      --bg:#0f172a; /* slate-900 */
      --card:#111827; /* gray-900 */
      --text:#e5e7eb; /* gray-200 */
      --muted:#9ca3af; /* gray-400 */
      --accent:#22c55e; /* green-500 */
      --danger:#ef4444; /* red-500 */
      --link:#60a5fa; /* blue-400 */
      --shadow: 0 20px 45px rgba(0,0,0,.45);
      --radius: 20px;
    }
    html,body{background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;margin:0}
    .wrap{max-width:840px;margin:24px auto;padding:24px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}
    header{display:flex;align-items:center;gap:16px;padding:18px 20px;border-bottom:1px solid rgba(255,255,255,.08);backdrop-filter: blur(2px)}
    header img.logo{width:56px;height:56px;object-fit:contain;border-radius:12px;background:#fff;padding:6px}
    header .hgroup{display:flex;flex-direction:column}
    header .hgroup h1{font-size:20px;margin:0;letter-spacing:.2px}
    header .hgroup span{color:var(--muted);font-size:13px}

    .content{display:grid;grid-template-columns: 180px 1fr;gap:18px;padding:20px}
    .avatar{display:flex;align-items:center;justify-content:center}
    .avatar img{width:160px;height:160px;border-radius:16px;object-fit:cover;border:2px solid rgba(255,255,255,.15);background:#0b1020}

    .fields{display:grid;gap:10px}
    .row{display:grid;grid-template-columns: 180px 1fr;gap:10px;align-items:center}
    .label{color:var(--muted);font-size:13px}
    .value{font-weight:600}

    .badges{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
    .badge{font-size:12px;padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.12)}
    .ok{background:rgba(34,197,94,.12);border-color:rgba(34,197,94,.35)}
    .warn{background:rgba(234,179,8,.12);border-color:rgba(234,179,8,.35)}

    .actions{display:flex;flex-wrap:wrap;gap:10px;margin:18px 20px 22px}
    .btn{appearance:none;border:1px solid rgba(255,255,255,.14);background:#0b1224;color:var(--text);padding:12px 14px;border-radius:12px;cursor:pointer;font-weight:600;text-decoration:none;display:inline-flex;align-items:center;gap:8px}
    .btn.primary{border-color:rgba(34,197,94,.45);background:linear-gradient(180deg, rgba(34,197,94,.25), rgba(34,197,94,.15))}
    .btn.link{border-color:rgba(96,165,250,.45);background:linear-gradient(180deg, rgba(96,165,250,.25), rgba(96,165,250,.12))}
    .btn.danger{border-color:rgba(239,68,68,.45);background:linear-gradient(180deg, rgba(239,68,68,.25), rgba(239,68,68,.12))}

    footer{padding:14px 20px;border-top:1px solid rgba(255,255,255,.08);color:var(--muted);font-size:12px;display:flex;justify-content:space-between;flex-wrap:wrap;gap:8px}

    .note{background:rgba(255,255,255,.05);border:1px dashed rgba(255,255,255,.15);padding:12px 14px;border-radius:12px;margin:0 20px 18px;color:var(--muted);font-size:13px}
    .tel{font-variant-numeric:tabular-nums}

    @media (max-width:720px){
      .content{grid-template-columns: 1fr}
      .row{grid-template-columns: 1fr}
      header img.logo{width:46px;height:46px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="document" aria-label="Página de verificación de credencial">
      <header>
        <img class="logo" id="logo" alt="Logo" src="Asset/GREENTECH LOGO.png" onerror="this.style.display='none'" />
        <div class="hgroup">
          <h1>VERIFICACIÓN DE CREDENCIAL COLABORADOR</h1>
          <span id="company">GreenTech</span>
        </div>
      </header>

      <div class="content">
        <div class="avatar">
          <img id="photo" alt="Foto del trabajador" src="Asset/WhatsApp Image 2025-10-23 at 9.16.00 AM.jpeg" onerror="this.src=''; this.style.display='none'">
        </div>
        <div class="fields">
          <div class="row"><div class="label">Nombre</div><div class="value" id="name">Edwin Jhaune Rojas</div></div>
          <div class="row"><div class="label">Carnet de Identidad</div><div class="value" id="Identify">8741425</div></div>
          <div class="row"><div class="label">Cargo</div><div class="value" id="role">Técnico de relevamiento</div></div>
          <div class="row"><div class="label">Empresa</div><div class="value" id="Service">GreenTech</div></div>
          <div class="row"><div class="label">Tercializa</div><div class="value" id="Service">ELFEC</div></div>
          <div class="row"><div class="label">Actividad</div><div class="value" id="activity">Relevamiento de postes eléctricos</div></div>
          <div class="row"><div class="label">Zona</div><div class="value" id="zone">Provincia Chapare</div></div>
          <div class="row"><div class="label">Vigencia</div><div class="value" id="valid">25/10/2025 – 31/12/2025</div></div>
          <div class="row"><div class="label">Supervisor</div><div class="value" id="supervisor">Ing. Miguel Angel Soria C. CEO GreenTech</div></div>
          <div class="row"><div class="label">Teléfono supervisor</div><div class="value tel" id="phone">+59165776126</div></div>
          <div class="row"><div class="label">Código de verificación</div><div class="value" id="code">GT-CH-01</div></div>

          <div class="badges" id="badges">
            <div class="badge ok" id="statusBadge">Credencial válida</div>
            <div class="badge" id="dateBadge">Emitida: 24/10/2025</div>
          </div>
        </div>
      </div>

      <p class="note" id="note">Si necesita confirmación inmediata, puede llamar al supervisor o solicitar una videollamada para verificar identidad y equipo en sitio.</p>

      <div class="actions">
        <a class="btn primary" id="callBtn" href="#">📞 Llamar al supervisor</a>
        <a class="btn link" id="permitBtn" href="#" target="_blank" rel="noopener">📄 Ver permiso</a>
        <button class="btn" id="shareBtn" type="button">🔗 Compartir esta verificación</button>
        <a class="btn danger" id="emergencyBtn" href="#">🚨 Emergencia</a>
      </div>

      <footer>
        <span id="footerValid">Válido únicamente durante el periodo indicado.</span>
        <span id="lastUpdate">Última actualización: <time></time></span>
      </footer>
    </div>
  </div>

<script>
(function(){
  const qs = new URLSearchParams(location.search);
  const get = (k, def="") => (qs.get(k) ?? def).trim();

  // Map query params → elements
  const map = {
    name: 'name', role: 'role', order: 'order', activity: 'activity', zone: 'zone',
    valid: 'valid', supervisor: 'supervisor', phone: 'phone', code: 'code',
    company: 'company', note: 'note'
  };

  for(const [param, id] of Object.entries(map)){
    const v = get(param);
    if(v){ document.getElementById(id).textContent = v; }
  }

  // Optional: logo, photo, permit, emergency
  const logo = get('logo');
  if(logo){ document.getElementById('logo').src = logo; }

  const photo = get('photo');
  if(photo){ document.getElementById('photo').src = photo; }

  const permit = get('permit');
  const permitBtn = document.getElementById('permitBtn');
  if(permit){ permitBtn.href = permit; } else { permitBtn.style.display='none'; }

  const phone = document.getElementById('phone').textContent.trim();
  const callBtn = document.getElementById('callBtn');
  if(phone){ callBtn.href = `tel:${phone.replace(/\s+/g,'')}`; }

  const emergency = get('emergency');
  const emergencyBtn = document.getElementById('emergencyBtn');
  if(emergency){ emergencyBtn.href = `tel:${emergency.replace(/\s+/g,'')}`; }
  else { emergencyBtn.style.display='none'; }

  // Status badge logic (valid_from, valid_to)
  const statusBadge = document.getElementById('statusBadge');
  const dateBadge = document.getElementById('dateBadge');
  const now = new Date();
  const fmt = (d)=> new Intl.DateTimeFormat('es-BO', {dateStyle:'medium', timeStyle: undefined}).format(d);
  const validFrom = get('valid_from');
  const validTo = get('valid_to');
  if(validFrom || validTo){
    let fromD = validFrom ? new Date(validFrom) : null;
    let toD = validTo ? new Date(validTo) : null;
    let text = '';
    if(fromD && toD){ text = `${fmt(fromD)} – ${fmt(toD)}`; }
    else if(fromD){ text = `Desde ${fmt(fromD)}`; }
    else if(toD){ text = `Hasta ${fmt(toD)}`; }
    if(text){ document.getElementById('valid').textContent = text; }

    const validNow = (!fromD || now>=fromD) && (!toD || now<=toD);
    statusBadge.textContent = validNow ? 'Credencial válida' : 'Fuera de vigencia';
    statusBadge.className = 'badge ' + (validNow ? 'ok' : 'warn');
  }
  // Issue date badge
  const issued = get('issued');
  if(issued){ dateBadge.textContent = `Emitida: ${fmt(new Date(issued))}`; }

  // Share button
  const shareBtn = document.getElementById('shareBtn');
  shareBtn.addEventListener('click', async ()=>{
    try{
      if(navigator.share){ await navigator.share({title:document.title, url:location.href}); }
      else { await navigator.clipboard.writeText(location.href); shareBtn.textContent = 'Copiado al portapapeles'; setTimeout(()=>shareBtn.textContent='🔗 Compartir esta verificación',2000); }
    }catch(e){ /* ignore */ }
  });

  // Last update time (client side)
  document.querySelector('#lastUpdate time').textContent = new Intl.DateTimeFormat('es-BO', {dateStyle:'medium', timeStyle:'short'}).format(new Date());
})();
</script>
  <!-- PIE DE PÁGINA PERSONALIZADO -->
<footer class="footer-servicio">
  <div class="footer-texto">Empresa al servicio de:</div>
  <div class="footer-logo">
    <img src="Asset/WhatsApp Image 2025-10-23 at 9.22.57 AM.jpeg" 
         alt="Logo cliente">
  </div>
</footer>

<style>
  .footer-servicio {
    position: fixed;
    bottom: 20px;
    right: 20px;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    z-index: 999;
  }

  .footer-texto {
    color: white;
    font-weight: 600;
    font-size: 14px;
  }

  .footer-logo {
  width: 140px;   /* antes 100px */
  height: 78px;   /* antes 56px */
  background: white;
  border-radius: 12px;
  border: 1px solid #ccc;
  display: flex;
  align-items: center;
  justify-content: center;
}
.footer-logo img {
    max-width: 95%;
    max-height: 95%;
    object-fit: contain;
  }




  /* 📱 Ajustes para pantallas pequeñas (celulares) */
  @media (max-width: 600px) {
    .footer-servicio {
      position: static;
      margin-top: 20px;
      margin-bottom: 10px;
    }
    .footer-logo {
  width: 140px;
  height: 78px;
}

    }
    .footer-texto {
      font-size: 13px;
    }
  }
</style>

  </div>
</footer>


</body>
</html>
