<!doctype html>
<html lang="es">
<head>
Â  <meta charset="utf-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1" />
Â  <title>VerificaciÃ³n de credencial â€” Green Tech</title>
Â  <meta name="description" content="PÃ¡gina de verificaciÃ³n de credencial para personal autorizado en campo." />
Â  <style>
Â  Â  :root{
Â  Â  Â  --bg:#0f172a; /* slate-900 */
Â  Â  Â  --card:#111827; /* gray-900 */
Â  Â  Â  --text:#e5e7eb; /* gray-200 */
Â  Â  Â  --muted:#9ca3af; /* gray-400 */
Â  Â  Â  --accent:#22c55e; /* green-500 */
Â  Â  Â  --danger:#ef4444; /* red-500 */
Â  Â  Â  --link:#60a5fa; /* blue-400 */
Â  Â  Â  --shadow: 0 20px 45px rgba(0,0,0,.45);
Â  Â  Â  --radius: 20px;
Â  Â  }
Â  Â  html,body{background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;margin:0}
Â  Â  .wrap{max-width:840px;margin:24px auto;padding:24px}
Â  Â  .card{background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}
Â  Â  header{display:flex;align-items:center;gap:16px;padding:18px 20px;border-bottom:1px solid rgba(255,255,255,.08);backdrop-filter: blur(2px)}
Â  Â  header img.logo{width:56px;height:56px;object-fit:contain;border-radius:12px;background:#fff;padding:6px}
Â  Â  header .hgroup{display:flex;flex-direction:column}
Â  Â  header .hgroup h1{font-size:20px;margin:0;letter-spacing:.2px}
Â  Â  header .hgroup span{color:var(--muted);font-size:13px}

Â  Â  .content{display:grid;grid-template-columns: 180px 1fr;gap:18px;padding:20px}
Â  Â  .avatar{display:flex;align-items:center;justify-content:center}
Â  Â  .avatar img{width:160px;height:160px;border-radius:16px;object-fit:cover;border:2px solid rgba(255,255,255,.15);background:#0b1020}

Â  Â  .fields{display:grid;gap:10px}
Â  Â  .row{display:grid;grid-template-columns: 180px 1fr;gap:10px;align-items:center}
Â  Â  .label{color:var(--muted);font-size:13px}
Â  Â  .value{font-weight:600}

Â  Â  .badges{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
Â  Â  .badge{font-size:12px;padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.12)}
Â  Â  .ok{background:rgba(34,197,94,.12);border-color:rgba(34,197,94,.35)}
Â  Â  .warn{background:rgba(234,179,8,.12);border-color:rgba(234,179,8,.35)}
Â  Â  .error{background:rgba(239,68,68,.12);border-color:rgba(239,68,68,.35)} /* Nuevo para error */

Â  Â  .actions{display:flex;flex-wrap:wrap;gap:10px;margin:18px 20px 22px}
Â  Â  .btn{appearance:none;border:1px solid rgba(255,255,255,.14);background:#0b1224;color:var(--text);padding:12px 14px;border-radius:12px;cursor:pointer;font-weight:600;text-decoration:none;display:inline-flex;align-items:center;gap:8px}
Â  Â  .btn.primary{border-color:rgba(34,197,94,.45);background:linear-gradient(180deg, rgba(34,197,94,.25), rgba(34,197,94,.15))}
Â  Â  .btn.link{border-color:rgba(96,165,250,.45);background:linear-gradient(180deg, rgba(96,165,250,.25), rgba(96,165,250,.12))}
Â  Â  .btn.danger{border-color:rgba(239,68,68,.45);background:linear-gradient(180deg, rgba(239,68,68,.25), rgba(239,68,68,.12))}

Â  Â  footer{padding:14px 20px;border-top:1px solid rgba(255,255,255,.08);color:var(--muted);font-size:12px;display:flex;justify-content:space-between;flex-wrap:wrap;gap:8px}

Â  Â  .note{background:rgba(255,255,255,.05);border:1px dashed rgba(255,255,255,.15);padding:12px 14px;border-radius:12px;margin:0 20px 18px;color:var(--muted);font-size:13px}
Â  Â  .tel{font-variant-numeric:tabular-nums}
    /* Estilos para el estado NO ENCONTRADO */
    .not-found .content, .not-found .actions { display: none; }
    .not-found .hgroup h1::after { content: ' - NO ENCONTRADO'; color: var(--danger); }
    .not-found .note { margin-bottom: 0; }

Â  Â  @media (max-width:720px){
Â  Â  Â  .content{grid-template-columns: 1fr}
Â  Â  Â  .row{grid-template-columns: 1fr}
Â  Â  Â  header img.logo{width:46px;height:46px}
Â  Â  }
Â  </style>
</head>
<body>
Â  <div class="wrap">
Â  Â  <div class="card" role="document" aria-label="PÃ¡gina de verificaciÃ³n de credencial" id="credentialCard">
Â  Â  Â  <header>
Â  Â  Â  Â  <img class="logo" id="logo" alt="Logo" src="" onerror="this.style.display='none'" />
Â  Â  Â  Â  <div class="hgroup">
Â  Â  Â  Â  Â  <h1>VERIFICACIÃ“N DE CREDENCIAL EMPRESA GREEN TECH</h1>
Â  Â  Â  Â  Â  <span id="company">GREEN TECH</span>
Â  Â  Â  Â  </div>
Â  Â  Â  </header>

Â  Â  Â  <div class="content">
Â  Â  Â  Â  <div class="avatar">
Â  Â  Â  Â  Â  <img id="photo" alt="Foto del trabajador" src="https://github.com/paodaz/Credencial-Green-Tech-Qr/blob/main/Asset/GREENTECH%20LOGO.png" onerror="this.src='https://via.placeholder.com/160x160.png?text=Sin+Foto';">
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="fields">
Â  Â  Â  Â  Â  <div class="row"><div class="label">Nombre</div><div class="value" id="name"></div></div>
Â  Â  Â  Â  Â  <div class="row"><div class="label">Cargo</div><div class="value" id="role"></div></div>
Â  Â  Â  Â  Â  <div class="row"><div class="label">CI</div><div class="value" id="order"></div></div>
Â  Â  Â  Â  Â  <div class="row"><div class="label">Actividad</div><div class="value" id="activity"></div></div>
Â  Â  Â  Â  Â  <div class="row"><div class="label">Zona</div><div class="value" id="zone"></div></div>
Â  Â  Â  Â  Â  <div class="row"><div class="label">Vigencia</div><div class="value" id="valid"></div></div>
Â  Â  Â  Â  Â  <div class="row"><div class="label">Supervisor</div><div class="value" id="supervisor"></div></div>
Â  Â  Â  Â  Â  <div class="row"><div class="label">TelÃ©fono supervisor</div><div class="value tel" id="phone"></div></div>
Â  Â  Â  Â  Â  <div class="row"><div class="label">CÃ³digo de verificaciÃ³n</div><div class="value" id="code"></div></div>

Â  Â  Â  Â  Â  <div class="badges" id="badges">
Â  Â  Â  Â  Â  Â  <div class="badge ok" id="statusBadge"></div>
Â  Â  Â  Â  Â  Â  <div class="badge" id="dateBadge"></div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  <p class="note" id="note">Si necesita confirmaciÃ³n inmediata, puede llamar al supervisor o solicitar una videollamada para verificar identidad y equipo en sitio.</p>

Â  Â  Â  <div class="actions">
Â  Â  Â  Â  <a class="btn primary" id="callBtn" href="#">ðŸ“ž Llamar al supervisor</a>
Â  Â  Â  Â  <a class="btn link" id="permitBtn" href="#" target="_blank" rel="noopener">ðŸ“„ Ver permiso</a>
Â  Â  Â  Â  <button class="btn" id="shareBtn" type="button">ðŸ”— Compartir esta verificaciÃ³n</button>
Â  Â  Â  Â  <a class="btn danger" id="emergencyBtn" href="#">ðŸš¨ Emergencia</a>
Â  Â  Â  </div>

Â  Â  Â  <footer>
Â  Â  Â  Â  <span id="footerValid">VÃ¡lido Ãºnicamente durante el periodo indicado.</span>
Â  Â  Â  Â  <span id="lastUpdate">Ãšltima actualizaciÃ³n: <time></time></span>
Â  Â  Â  </footer>
Â  Â  </div>
Â  </div>

<script>
/**
 * ðŸ’¡ LISTA DE TRABAJADORES
 * Para aÃ±adir mÃ¡s trabajadores, simplemente agrega nuevos objetos a este array.
 * El campo clave para la verificaciÃ³n es 'code'.
 * Los campos de fecha (valid_from, valid_to, issued) deben ser en formato YYYY-MM-DD
 * para que JavaScript los interprete correctamente (por ejemplo, '2025-10-15').
 */
const WORKERS = [
Â  {
Â  Â  // Tu trabajador original
Â  Â  code: 'GT-999-01',
Â  Â  name: 'Edwin Jhaune Rojas',
Â  Â  role: 'TÃ©cnico de relevamiento',
Â  Â  order: '8741425', // CI
Â  Â  activity: 'Relevamiento de postes elÃ©ctricos GREEN TECH-ELFEC',
Â  Â  zone: 'Provincia Chapare',
Â  Â  valid_from: '2025-10-15', // Importante: Formato YYYY-MM-DD
Â  Â  valid_to: '2025-12-31', Â  // Importante: Formato YYYY-MM-DD
Â  Â  supervisor: 'Ing. Miguel Angel Soria C.',
Â  Â  phone: '+59165757126',
Â  Â  issued: '2025-10-15',
Â  Â  // Opcionales
Â  Â  photo: 'https://cdn.example.com/fotos/GT-CH-1.jpg', // URL a la foto (reemplazar con la tuya)
Â  Â  permit: 'https://docs.google.com/document/d/PermisoGT-CH-1',
Â  Â  emergency: '+59165776126'
Â  },
Â  {
Â  Â  // Nuevo trabajador de ejemplo
Â  Â  code: 'GT-777-01',
Â  Â  name: 'Ing.Miguel Angel Soria Castellon',
Â  Â  role: 'Gerente General',
Â  Â  order: '6542556', // CI
Â  Â  activity: 'Relevamiento de postes elÃ©ctricos GREEN TECH-ELFEC',
Â  Â  zone: 'Cochabamba',
Â  Â  valid_from: '2025-11-01',
Â  Â  valid_to: '2026-03-30',
Â  Â  supervisor: 'Ing Miguel Angel Soria Castellon',
Â  Â  phone: '+59165776126',
Â  Â  issued: '2025-11-01',
Â  Â  photo: 'Asset/WhatsApp Image 2025-02-07 at 8.15.11 PM.jpeg',
Â  Â  permit: 'https://docs.google.com/document/d/PermisoGT-777-01',
Â  Â  // emergency no definido, se ocultarÃ¡ el botÃ³n
Â  },
Â  {
Â  Â  // Otro trabajador
Â  Â  code: 'GT-777-02',
Â  Â  name: 'Percy Soria Castellon',
Â  Â  role: 'TÃ©cnico ElÃ©ctrico',
Â  Â  order: '5421369', // CI
Â  Â  activity: 'Relevamiento de postes elÃ©ctricos GREEN TECH-ELFEC',
Â  Â  zone: 'Cochabamba',
Â  Â  valid_from: '2025-11-01',
Â  Â  valid_to: '2026-03-30', // Vencido para el dÃ­a de hoy (25/11/2025)
Â  Â  supervisor: 'Ing. Miguel Angel Soria C.',
Â  Â  phone: '+59165776126',
Â  Â  issued: '2025-11-01',
Â  Â  photo: 'https://cdn.example.com/fotos/GT-SC-10.jpg',
Â  },
Â {
Â  Â  // Otro trabajador
Â  Â  code: 'GT-888-02',
Â  Â  name: 'Cesar Flores Apaza',
Â  Â  role: 'TÃ©cnico ElÃ©ctrico',
Â  Â  order: '8721470', // CI
Â  Â  activity: 'Relevamiento de postes elÃ©ctricos GREEN TECH-ELFEC',
Â  Â  zone: 'Cochabamba',
Â  Â  valid_from: '2025-11-01',
Â  Â  valid_to: '2026-03-30', // Vencido para el dÃ­a de hoy (25/11/2025)
Â  Â  supervisor: 'Ing. Miguel Angel Soria C.',
Â  Â  phone: '+59165776126',
Â  Â  issued: '2025-11-01',
Â  Â  photo: 'https://cdn.example.com/fotos/GT-SC-10.jpg',
  Â  },
Â {
Â  Â  // Otro trabajador
Â  Â  code: 'GT-888-01',
Â  Â  name: 'Elvis Jhosivaldo Mamani Callahuara',
Â  Â  role: 'TÃ©cnico ElÃ©ctrico',
Â  Â  order: '9515164', // CI
Â  Â  activity: 'Relevamiento de postes elÃ©ctricos GREEN TECH-ELFEC',
Â  Â  zone: 'Cochabamba',
Â  Â  valid_from: '2025-11-01',
Â  Â  valid_to: '2026-03-30', // Vencido para el dÃ­a de hoy (25/11/2025)
Â  Â  supervisor: 'Ing. Miguel Angel Soria C.',
Â  Â  phone: '+59165776126',
Â  Â  issued: '2025-11-01',
Â  Â  photo: 'https://cdn.example.com/fotos/GT-SC-10.jpg', 
];


(function(){
Â  const qs = new URLSearchParams(location.search);
Â  const getParam = (k, def="") => (qs.get(k) ?? def).trim();
Â  const card = document.getElementById('credentialCard');

Â  // 1. OBTENER CÃ“DIGO DE VERIFICACIÃ“N de la URL (?code=...)
Â  const verificationCode = getParam('code').toUpperCase();
Â  let workerData = null;

Â  if (verificationCode) {
Â  Â  // 2. BUSCAR EL TRABAJADOR EN LA LISTA
Â  Â  workerData = WORKERS.find(w => w.code.toUpperCase() === verificationCode);
Â  }

Â  if (!workerData) {
Â  Â  // 3. SI NO SE ENCUENTRA (o no hay cÃ³digo), MOSTRAR MENSAJE DE ERROR
Â  Â  card.classList.add('not-found');
Â  Â  document.getElementById('note').innerHTML = `âš ï¸ No se encontrÃ³ la credencial con el cÃ³digo **${verificationCode || 'vacÃ­o'}**. Por favor, verifique el cÃ³digo QR o intente con otro.`;
Â  Â  document.getElementById('statusBadge').textContent = 'CÃ³digo no encontrado';
Â  Â  document.getElementById('statusBadge').className = 'badge error';
Â  Â  document.getElementById('dateBadge').style.display = 'none';
Â  Â  // Ocultar botones de acciÃ³n si no hay datos
Â  Â  document.querySelectorAll('.actions a, .actions button').forEach(el => el.style.display = 'none');
Â  Â  return; // Detener la ejecuciÃ³n del script
Â  }

Â  // 4. MAPEO DE DATOS ENCONTRADOS a elementos del DOM
Â  const map = {
Â  Â  name: 'name', role: 'role', order: 'order', activity: 'activity', zone: 'zone',
Â  Â  supervisor: 'supervisor', phone: 'phone', code: 'code',
Â  Â  company: 'company', note: 'note'
Â  };

Â  for(const [key, id] of Object.entries(map)){
Â  Â  if(workerData[key]){
Â  Â  Â  document.getElementById(id).textContent = workerData[key];
Â  Â  }
Â  }
Â  
Â  // 5. LÃ³gica de Vigencia (valid_from, valid_to)
Â  const statusBadge = document.getElementById('statusBadge');
Â  const dateBadge = document.getElementById('dateBadge');
Â  const now = new Date();
Â  const fmt = (d)=> new Intl.DateTimeFormat('es-BO', {dateStyle:'medium', timeStyle: undefined}).format(d);
Â  const validFrom = workerData.valid_from;
Â  const validTo = workerData.valid_to;
Â  
Â  if(validFrom || validTo){
Â  Â  let fromD = validFrom ? new Date(validFrom) : null;
Â  Â  let toD = validTo ? new Date(validTo) : null;
Â  Â  let text = '';

Â  Â  if(fromD && toD){ text = `${fmt(fromD)} â€“ ${fmt(toD)}`; }
Â  Â  else if(fromD){ text = `Desde ${fmt(fromD)}`; }
Â  Â  else if(toD){ text = `Hasta ${fmt(toD)}`; }
Â  Â  
Â  Â  document.getElementById('valid').textContent = text;

Â  Â  const validNow = (!fromD || now>=fromD) && (!toD || now<=toD);
Â  Â  statusBadge.textContent = validNow ? 'Credencial vÃ¡lida' : 'VENCIDA';
Â  Â  statusBadge.className = 'badge ' + (validNow ? 'ok' : 'warn');
Â  } else {
Â  Â  // Si no hay fechas definidas, asumimos que estÃ¡ vÃ¡lida
Â  Â  statusBadge.textContent = 'Credencial vÃ¡lida';
Â  Â  statusBadge.className = 'badge ok';
Â  Â  document.getElementById('valid').textContent = 'Permanente';
Â  }

Â  // 6. Propiedades Opcionales
Â  const logoEl = document.getElementById('logo');
Â  if(workerData.logo){ logoEl.src = workerData.logo; logoEl.style.display='inline'; } else { logoEl.style.display='none'; }

Â  const photoEl = document.getElementById('photo');
Â  if(workerData.photo){ photoEl.src = workerData.photo; }

Â  const permitBtn = document.getElementById('permitBtn');
Â  if(workerData.permit){ permitBtn.href = workerData.permit; } else { permitBtn.style.display='none'; }

Â  const phoneText = workerData.phone?.trim();
Â  const callBtn = document.getElementById('callBtn');
Â  if(phoneText){ callBtn.href = `tel:${phoneText.replace(/\s+/g,'')}`; } else { callBtn.style.display='none'; }

Â  const emergencyBtn = document.getElementById('emergencyBtn');
Â  if(workerData.emergency){ emergencyBtn.href = `tel:${workerData.emergency.replace(/\s+/g,'')}`; }
Â  else { emergencyBtn.style.display='none'; }

Â  // Issue date badge
Â  if(workerData.issued){ dateBadge.textContent = `Emitida: ${fmt(new Date(workerData.issued))}`; } else { dateBadge.style.display='none'; }
Â  
Â  // 7. BotÃ³n Compartir
Â  const shareBtn = document.getElementById('shareBtn');
Â  shareBtn.addEventListener('click', async ()=>{
Â  Â  try{
Â  Â  Â  if(navigator.share){ await navigator.share({title:document.title, url:location.href}); }
Â  Â  Â  else { await navigator.clipboard.writeText(location.href); shareBtn.textContent = 'Copiado al portapapeles'; setTimeout(()=>shareBtn.textContent='ðŸ”— Compartir esta verificaciÃ³n',2000); }
Â  Â  }catch(e){ /* ignore */ }
Â  });

Â  // 8. Hora de Ãºltima actualizaciÃ³n (lado del cliente)
Â  document.querySelector('#lastUpdate time').textContent = new Intl.DateTimeFormat('es-BO', {dateStyle:'medium', timeStyle:'short'}).format(new Date());
})();
</script>
</body>
</html>
